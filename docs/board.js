const Board=new function(){const t=45,r=this;this.BLACK=-1,this.EMPTY=0,this.WHITE=1,this.createBoard=function(){for(var a=$("#board"),e=0;e<8;e++)a.append(l("text").attr({x:e%8*100+72,y:22,fill:"#eee","font-weight":"bold","font-size":20}).text("ABCDEFGH".substring(e,e+1))),a.append(l("text").attr({x:7,y:e%8*100+92,fill:"#eee","font-weight":"bold","font-size":20}).text(e+1));for(var e=0;e<64;e++)a.append(l("rect").attr({fill:"rgb(0, "+(187-3*(e%8+Math.floor(e/8)))+", "+(68-(e%8+Math.floor(e/8)))+")",x:e%8*100+30,y:100*Math.floor(e/8)+30,width:97,height:97,rx:5,ry:5}));a.append(l("circle").attr({fill:"#021",cx:228,cy:228,r:7})),a.append(l("circle").attr({fill:"#021",cx:628,cy:228,r:7})),a.append(l("circle").attr({fill:"#021",cx:228,cy:628,r:7})),a.append(l("circle").attr({fill:"#021",cx:628,cy:628,r:7}));for(var e=0;e<64;e++){var i=l("g").addClass("square"),o=l("g").addClass("discGroup");i.append(l("circle").attr({fill:"",cx:e%8*100+78,cy:100*Math.floor(e/8)+78,r:0,class:"mark"})),o.append(l("ellipse").attr({fill:"rgba(0, 0, 0, 0.3)",cx:e%8*100+82,cy:100*Math.floor(e/8)+82,rx:t,ry:0,filter:"url(#blur)",transform:"rotate(45 "+(e%8*100+82)+" "+(100*Math.floor(e/8)+82)+")",class:"shadow"})),o.append(l("ellipse").attr({fill:"",cx:e%8*100+78,cy:100*Math.floor(e/8)+78,rx:t,ry:0,transform:"rotate(45 "+(e%8*100+78)+" "+(100*Math.floor(e/8)+78)+")",class:"disc"})),i.append(o),i.append(l("rect").attr({fill:"transparent",x:e%8*100+40,y:100*Math.floor(e/8)+40,width:77,height:77}).click(function(t){return function(){r.click(t)}}(e))),a.append(i)}function l(t){return $(document.createElementNS("http://www.w3.org/2000/svg",t))}a.append(l("polygon").attr({id:"moveMark",points:"112,35 122,35 122,45",fill:"#e33",stroke:"#e33","stroke-width":3,"stroke-linejoin":"round"}).hide())},this.setDisc=function(r,a,e,i){var o=$("#board .square").eq(r),l=null==i?0:Math.random()*i-i/2,n=null==i?0:Math.random()*i-i/2;Tick.once("disc-"+r,{disc:a,x:l,y:n},function(r){var a;a=r.disc<=0?"url(#black) #011":"url(#white) #fee",0==r.x&&0==r.y?o.find(".discGroup").removeAttr("transform"):o.find(".discGroup").attr("transform","translate("+r.x+", "+r.y+")"),o.find(".shadow").attr("ry",t*Math.abs(r.disc)),o.find(".disc").attr({fill:a,ry:t*Math.abs(r.disc)})},200,e)},this.setMark=function(t,r,a,e,i,o,l){var n=$("#board .square").eq(t);Tick.once("mark-"+t,{size:r,r:a,g:e,b:i,a:o},function(t){n.find(".mark").attr({fill:"rgba("+Math.floor(t.r)+", "+Math.floor(t.g)+", "+Math.floor(t.b)+", "+t.a+")",r:t.size})},l||200)},this.setMoveMark=function(t){var r=$("#moveMark");null==t?r.hide().removeAttr("transform"):r.show().attr("transform","translate("+t%8*100+", "+100*Math.floor(t/8)+")")},this.click=function(t){},this.getDisc=function(t){var r=Tick.getMetaValue("disc-"+t);return null==r?0:r.disc}};