const Main=new function(){var e='\t<div id="messageContainer">\t\t<div id="messageBorder">\t\t\t<div id="message"></div>\t\t\t<div id="messageWait"></div>\t\t</div>\t\t<div id="messageChara"><img></div>\t\t<div id="stand"></div>\t</div>\t<div id="boardContainer">\t\t<svg id="board" viewBox="0, 0, 830, 830">';navigator.userAgent.match(/Android/)||(e+='\t\t\t<filter id="blur">\t\t\t\t<feGaussianBlur stdDeviation="5"></feGaussianBlur>\t\t\t\t<feBlend mode="overlay"></feBlend>\t\t\t</filter>'),e+='\t\t\t<linearGradient id="black">\t\t\t\t<stop offset="0%" stop-color="#233"></stop>\t\t\t\t<stop offset="50%" stop-color="#011"></stop>\t\t\t</linearGradient>\t\t\t<linearGradient id="white">\t\t\t\t<stop offset="50%" stop-color="#fee"></stop>\t\t\t\t<stop offset="100%" stop-color="#dcc"></stop>\t\t\t</linearGradient>\t\t</svg>\t\t<div id="dialog">\t\t\t<span id="dialogMessage"></span>\t\t\t<div id="dialogButton">\t\t\t</div>\t\t</div>\t</div>';var t,a,s,n=null,o=void 0,i=!1;this.init=r;try{localStorage.setItem("test","1"),localStorage.removeItem("test"),null!=window.IntersectionObserver&&(n=Com.load()).push.apply(Sound.load(["move1","move2","message","button","win","even","loss"]))}catch(e){}function r(e,n){$("#screen").fadeIn(e,function(){for(var e=0;e<64;e++)Board.setDisc(e,Board.EMPTY);Board.setMoveMark(null),Com.setDisc(null),Com.setLevel(2),Com.setMoveRand(),Com.setRand0Cnt(0),Com.getPlayerTurnMessage(),$("#message").empty(),t=a=s=0,Com.getYsw()<3?$("body").removeClass("end"):$("body").addClass("end"),setTimeout(function(){0!=$("#messageContainer").length&&$("#screen").fadeOut(100,function(){0!=$("#messageContainer").length&&(Com.getYsw()<3?(Queue.message("よう、何の用だ？"),l()):function e(){Queue.dialog({message:"何をしますか？",button:["対人戦","完全リセット"],callback:function(t){switch(Queue.dialog(),t){case 1:Game.startMessage(null,!0);break;case 2:Queue.dialog({message:"完全リセットしますか？",button:["はい","いいえ"],callback:function(t){switch(Queue.dialog(),t){case 1:Com.setYsw(0),r(1500,1e3);break;case 2:e()}}})}}})}())})},n)})}function l(){i=!0,Queue.dialog({button:["お前と勝負したい","お前に用はない",Com.getYsw()>0?null:"お前は誰だ？",0==Com.getYsw()?null:"調子はどうだ？",null==o?null:{text:"インストールする",attr:{id:"appInstBtn"}}],callback:function(e){switch(e){case 1:i=!1,Queue.dialog(),0==Com.getYsw()?(Queue.message("なにで、勝負するんだ？"),Queue.dialog({button:["オセロ","将棋","囲碁","麻雀"],callback:function(e){switch(e){case 1:Queue.dialog(),Game.startMessage(null,!0);break;case 2:case 3:Queue.message("あえて聞いたんだ。目の前のものをよく見な。");break;case 4:Queue.message("ヾ(｀◇´)ﾉ彡☆ｺﾉ!ﾊﾞｶﾁﾝｶﾞｧ！目の前のものをよく見て選びな。")}}})):Game.startMessage(null,!0);break;case 2:i=!1,Queue.dialog(),t<1?(Queue.message("なんだ、対人戦をするのか？"),Queue.dialog({button:["そうだ","いいや"],callback:function(e){switch(Queue.dialog(),e){case 1:Queue.message("悪いが対人戦は他でやってくれ。<br />他に何か用か？");break;case 2:Queue.message("なんじゃそりゃ、はっきりしろ！<br />何の用だ？")}l()}}),t++):Game.startMessage("だが付き合ってもらうぜ。<br />",!0);break;case 3:var n=["俺はお前の対戦相手だ。俺が相手をしてやる。","俺の事より、早く始めようぜ。そのためにここに来たんだろ？","そう言うお前は強いのか？ まぁ、俺より弱ければ誰でもいいけどな。","ここでいつまでも話し合うより、とっとと始めるぜよ。","それはもういいだろ？ 早く始めるぞ。","…始めるぞ。"];a<n.length?Queue.message(n[a++]):(Queue.dialog(),Game.startMessage("もういい。<br />",!0));break;case 4:if(s<3){var r=Com.getMoveRand();r<300?Queue.message("好調だぜよ。"):r<400?Queue.message("普通だ。<br />他に？"):r<500?Queue.message("いまいち。"):Queue.message("ちょっと調子悪いんだ。<br />他に？"),s++}else Queue.message("しつけーよ、お前。もう言わん！");break;case 5:o.prompt()}}})}$(function(){if($(document).on("selectstart contextmenu",function(){return!1}),null!=n){$("#main").prepend(e),new IntersectionObserver(function(e){e[0].isIntersecting&&a()}).observe($("#test").get(0)),$(window).resize(function(){var e=0,t=0;"flex"==$("#messageContainer").css("display")&&(e=$(window).width(),t=$(window).height()-$("#boardContainer").offset().top-1),e>t?($("#messageContainer").width(t),$("#boardContainer").width(t)):($("#messageContainer").width(""),$("#boardContainer").width(""))}).trigger("resize"),null!=navigator.serviceWorker&&(navigator.serviceWorker.register("serwork.js"),$(window).on("beforeinstallprompt",function(e){null!==o&&(o=e.originalEvent,i&&l())}).on("appinstalled",function(){0!=$("#appInstBtn").length&&(o=null,$("#appInstBtn").remove(),Queue.message("お、ありがとよ。"))}));var t=setInterval(function(){$("#screen span").text("◆"==$("#screen span").text()?"■":"◆")},500);$.when.apply(null,n).then(function(){if(clearInterval(t),0==$("#messageContainer").length)return;$("#messageChara img").on("error",function(){null!=$(this).attr("src")&&a()}),$("#screen span").empty(),Game.create(),r(0,0)},a)}else a();function a(){clearInterval(t),$("#messageContainer").remove(),$("#boardContainer").remove(),$("#screen").stop(!0,!0).show().find("span").html("Error<p><a href='#' style='font-size: 50%;' onclick='location.reload(); return false;'>再読込</p>")}})};